# 物联网语音云云对接

云云对接，即在设备物联网体系中，厂商自建设备云平台服务与各三方平台云服务的对接。

厂商在三方平台创建自身的技能平台后，适配各厂商提供的云服务对接协议，即可实现与厂商自建体系的间接连接；

以天猫精灵的简介图为例子：

![](https://leyunone-img.oss-cn-hangzhou.aliyuncs.com/image/2024-01-17/e2446cf2-1c5f-4ef7-bc43-5105acbe636d.png)

通讯协议几乎只包含HTTP接口调用的方式，因此云云对接的流程看起来就很简单且清澈：

1. 用户语音触发三方平台，以下以发起 `打开空调` 为例
2. 三方平台根据 `打开空调` 找到对应设备，将设备id与 `打开空调` 动作通过HTTP接口调用的方式，转递给产商云
3. 产商云根据 `控制设备` 指令协议进行接口对接，将其消耗至内部云服务中，进行实施的设备控制

除了HTTP接口调用的形式，还存在少量支持局域网下WIFI/蓝牙形式的协议对接，不过整体流程与上述无异；

其后，本篇将介绍云云对接的抽象流程、一般架构以及奇妙的开发方案

## 流程

本篇略过用户授权这一技能授权前置，因此一个标准的 `三方云->产商云` 一定是这样的过程：

1. 发现设备
2. 控制设备
3. 查询/同步设备
4. 主动上报

其中，`发现设备` 一定是首要的动作，其余三个都是设备语音技能的赋能项；

**发现设备**

根据 `小度` `小爱` `Tmall` `...` 等平台的发现设备协议，由于暂未发现其他平台的异处，发现设备一定由以下部分组成：

1. 设备id、设备名、设备类型[三方云平台]
2. 技能列表、属性列表
3. 用户/客户端id

因此这一流程的关键点是：**将产商云设备的技能、属性与三方云文档中所列一一对应**

