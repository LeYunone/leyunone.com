> 为防止颅内退化，自己做过的事被遗忘；
>
> 将自己做过的项目经验记录下来变得非常有必要，本篇将记录的是，云平台，设备中心的项目经验

首先从项目的技术说起，和主流互联网项目技术一致，springboot一套，redis缓存，数据库mysql，mongdb。

# 技术

纯后台中心应用，使用了目前互联网主流体系的技术与框架

**开发框架**： `SpringBoot一套` 、`MyBatis-plus`、`easy-rule`  

**中间件**：`redis`、`mqtt` 、`rabbitmq`、`kaffka` 、`nacos` 、`XXL-JOB`

**数据库**：`Mysql`、`Moonggdb`

**工具**：`极光推送`、`阿里云OSS` 、`阿里云短信`

## 这是什么

设备中心，顾名思义，聚合设备的中心。

由三部分组成：

1. 设备管理
2. 设备网关
3. 设备连接桶

**设备管理：** 包括但不限于设备的基本信息管理，设备消息的发送上游、设备远程云端功能的实现、设备登录、创建、烧录等操作的入口等等

**设备网关**：包括但不限于设备连接设备中心的中驱，设备消息的接收上游与实际发送消息者，设备消息的处理与分发、设备权限与路由的分配管理等等

**设备连接桶**：设备与设备中心进行业务级连接的地方

![](https://leyunone-img.oss-cn-hangzhou.aliyuncs.com/image/2024-03-18/b83f1f6e-fdc3-48d8-88ef-db3d55d70fda.png)

用白话文解释设备中心存在的意义：

设备通过设备连接桶，登记自己的连接信息并且拿到对应的设备中心网关地址；

连接成功后，将自己的功能运行状态或者当前的属性状态\属性状态的变更，下发给设备网关，网关通过路由的负载均衡分配给设备中心。

设备中心记录设备上报的属性状态，并且更新为这台设备在设备中心的快照模型。

功能的运行，比如设备开、关、改变模式、属性变更等等，通过规则引擎下发给该设备配置的对应应用

## 有什么用

设备成功接入到设备中心之后，用户可以通过设备中心进行如下操作：

1. 操作设备
2. 获得设备当前信息和属性
3. 同步设备
4. 为设备进行云端功能赋值，比如云呼叫、云视听、OTA升级、设备配对等等...
5. 设备黑名单，功能权限，信息修改等等管理功能
6. 智能语音云平台、产商云平台等等云对云协议的接入
7. ...

操作设备，获取信息等基础功能不说，拿**云端功能赋值**说说：

假设一台设备A，在生产的设计中只有开关功能。

生产之后客户想要一个语音对讲的功能如何实现？

按照正常的流程，需要将设备重新设计，进行硬件级的开发。

但是加入公司有云平台-设备中心的存在，为一个设备赋予语音对讲的功能就变的很简单了：

1. 在设备中添加语音对讲标准模型的硬件
2. 连接网络，接入设备中心
3. 下载我司有语音对讲功能的APP，配对设备，使用其功能





